<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<record id="delsol_financial_state_tree" model="ir.ui.view">
			<field name="name">delsol.financial_state.tree</field>
			<field name="model">delsol.financial_state</field>
			<field name="arch" type="xml">
				<tree string="Estados Financieros" colors="green:state in ('presented'),gray:state in ('draft')">
						<field name="dealer_code" />
						<field name="date_month" />
						<field name="rows" />
						<field name="state" />
				</tree>
			</field>
		</record>
		<record id="delsol_financial_stateform" model="ir.ui.view">
			<field name="name">delsol.financial_state.form</field>
			<field name="model">delsol.financial_state</field>
			<field name="arch" type="xml">
				<form string="Estado Financiero">
					<header>
						<field name="id" invisible="1" />
						<field name="financial_state_excel_visible" invisible="1"  />
						<field name="state" widget="statusbar" nolabel="1" clickable="False" />
						<div class="oe_read_only">
	                        <button name="clean_all" type="object" string="Limpiar" icon="gtk-clear"  
	                        	attrs="{'invisible':[('id','=',False)]}"/>
	                        <button name="process_excel" type="object" string="Procesar Excel" icon="gtk-execute" 
	                       	 	attrs="{'invisible':['|','|',('id','=',False),('state','!=','draft'),('financial_state_excel_visible','==',False)]}"/>
	                        <button name="make_dat" type="object" string="(Re)Generar DAT" icon="gtk-convert"
	                         	attrs="{'invisible':['|',('id','=',False),('state','!=','proccesed')]}"/>
	                        <button name="upload_dat" type="object" string="Presentar DAT" icon="gtk-disconnect" 
	                         	attrs="{'invisible':['|',('id','=',False),('state','!=','builded')]}"/>
						</div>

					</header>
					<sheet string="Estado Financiero">
						<h1>
						<group>
							<group>
								<field name="dealer_code" />
								<field name="date_month"/>
							</group>
						</group>
						</h1>
						<group>
							<group>
								
								<field name="financial_state_excel_fname" invisible="1"/>
								<field name="financial_state_excel" filename="financial_state_excel_fname" />
								<field name="financial_state_fis_fname" invisible="1"/>
								<field name="financial_state_fis" filename="financial_state_fis_fname" attrs="{'invisible':[('id','=',False)]}"/>
							</group>
						</group>
						<field name="rows" attrs="{'invisible':[('id','=',False)]}">
								<tree string="Estados Financieros" editable="bottom" create="0" delete="0">
										<field name="active" widget="checkbox" />
										<field name="name" />
										<field name="description" />
										<field name="code" />
										<field name="value_computed" />
										<field name="value_str" />
										<field name="value_money" />
										<field name="excel_sheet" />
										<field name="excel_row" />
										<field name="excel_col" />
										<field name="calculation_formula" />
								</tree>
						</field>
					</sheet>
				</form>
			</field>
		</record>



		<record id="open_view_delsol_financial_state" model="ir.actions.act_window">
			<field name="name">Estados Financieros</field>
			<field name="res_model">delsol.financial_state</field>
			<field name="view_type">form</field>
			<field name="domain">[]</field>
			<field name="view_mode">tree,form</field>
		</record>


	</data>
</openerp>